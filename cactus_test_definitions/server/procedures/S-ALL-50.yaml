Description: Extended Operations
Category: Ongoing Operations
Classes:
 - A

TargetVersions:
 - v1.2

Preconditions:
  required_clients:
    - id: client
  
Steps:
  - id: PRECONDITION 1 - EndDevice Registration
    repeat_until_pass: true
    instructions:
      - Create an EndDevice registration for client.
    action:
      type: discovery
      parameters:
        resources:
          - EndDevice
          - DeviceCapability
          - MirrorUsagePointList
          - DER
    checks:
      - type: end-device # This will be the check that will block UNTIL there is an existing EndDevice registration
        parameters:
          matches_client: true

  - id: 1 - Simulate Client (72 hours).
    action:
      type: simulate-client
      parameters:
          duration_seconds: 300
          post_poll_rate_seconds: 60
    
  - id: 2 - No change in Registration
    action:
      type: discovery
      parameters:
        resources:
          - EndDevice
    checks:
      - type: end-device
        parameters:
          matches_client: true
